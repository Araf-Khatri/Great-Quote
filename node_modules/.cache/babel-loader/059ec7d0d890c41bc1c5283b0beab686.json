{"ast":null,"code":"const FIREBASE_DOMAIN = 'https://react-http-f46cb-default-rtdb.asia-southeast1.firebasedatabase.app';\nexport async function getAllQuotes() {\n  const response = await fetch(`${FIREBASE_DOMAIN}/quotes.json`);\n  const data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not fetch quotes.');\n  }\n\n  const transformedQuotes = [];\n\n  for (const key in data) {\n    const quoteObj = {\n      id: key,\n      ...data[key]\n    };\n    transformedQuotes.push(quoteObj);\n  }\n\n  return transformedQuotes;\n}\nexport async function getSingleQuote(quoteId) {\n  const response = await fetch(`${FIREBASE_DOMAIN}/quotes/${quoteId}.json`);\n  const data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not fetch quote.');\n  }\n\n  const loadedQuote = {\n    id: quoteId,\n    ...data\n  };\n  return loadedQuote;\n}\nexport async function addQuote(quoteData) {\n  quoteData = {\n    author: quoteData.author.trim(),\n    text: quoteData.text.trim()\n  };\n  console.log(quoteData);\n\n  if (!quoteData.text.length) {\n    return null;\n  }\n\n  if (quoteData.author.length === 0) {\n    quoteData.author = 'Anonymous';\n  }\n\n  const response = await fetch(`${FIREBASE_DOMAIN}/quotes.json`, {\n    method: 'POST',\n    body: JSON.stringify(quoteData),\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  const data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not create quote.');\n  }\n\n  return null;\n}\nexport async function addComment(requestData) {\n  requestData.commentData.text = requestData.commentData.text.trim();\n  if (!requestData.commentData.text.length) return;\n  const response = await fetch(`${FIREBASE_DOMAIN}/comments/${requestData.quoteId}.json`, {\n    method: 'POST',\n    body: JSON.stringify(requestData.commentData),\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  const data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not add comment.');\n  }\n\n  return {\n    commentId: data.name\n  };\n}\nexport async function getAllComments(quoteId) {\n  const response = await fetch(`${FIREBASE_DOMAIN}/comments/${quoteId}.json`);\n  const data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not get comments.');\n  }\n\n  const transformedComments = [];\n\n  for (const key in data) {\n    const commentObj = {\n      id: key,\n      ...data[key]\n    };\n    if (commentObj.text.length > 0) transformedComments.push(commentObj);\n  }\n\n  return transformedComments;\n}","map":{"version":3,"names":["FIREBASE_DOMAIN","getAllQuotes","response","fetch","data","json","ok","Error","message","transformedQuotes","key","quoteObj","id","push","getSingleQuote","quoteId","loadedQuote","addQuote","quoteData","author","trim","text","console","log","length","method","body","JSON","stringify","headers","addComment","requestData","commentData","commentId","name","getAllComments","transformedComments","commentObj"],"sources":["/home/linux/Desktop/Araf/complete-React-JS/s20.2-ReactRouterV5-Project/src/lib/api.js"],"sourcesContent":["const FIREBASE_DOMAIN = 'https://react-http-f46cb-default-rtdb.asia-southeast1.firebasedatabase.app';\n\nexport async function getAllQuotes() {\n  const response = await fetch(`${FIREBASE_DOMAIN}/quotes.json`);\n  const data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not fetch quotes.');\n  }\n\n  const transformedQuotes = [];\n\n  for (const key in data) {\n    const quoteObj = {\n      id: key,\n      ...data[key],\n    };\n\n    transformedQuotes.push(quoteObj);\n  }\n\n  return transformedQuotes;\n}\n\nexport async function getSingleQuote(quoteId) {\n  const response = await fetch(`${FIREBASE_DOMAIN}/quotes/${quoteId}.json`);\n  const data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not fetch quote.');\n  }\n\n  const loadedQuote = {\n    id: quoteId,\n    ...data,\n  };\n\n  return loadedQuote;\n}\n\nexport async function addQuote(quoteData) {\n  quoteData = {\n    author: quoteData.author.trim(),\n    text: quoteData.text.trim()\n  }\n\n  console.log(quoteData);\n  if (!quoteData.text.length) {\n    return null;\n  } \n\n  if (quoteData.author.length === 0) {\n    quoteData.author = 'Anonymous';\n  }\n\n  const response = await fetch(`${FIREBASE_DOMAIN}/quotes.json`, {\n    method: 'POST',\n    body: JSON.stringify(quoteData),\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n  const data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not create quote.');\n  }\n\n  return null;\n}\n\nexport async function addComment(requestData) {\n  requestData.commentData.text = requestData.commentData.text.trim();\n  if (!requestData.commentData.text.length) return;\n\n  const response = await fetch(`${FIREBASE_DOMAIN}/comments/${requestData.quoteId}.json`, {\n    method: 'POST',\n    body: JSON.stringify(requestData.commentData),\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n  const data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not add comment.');\n  }\n\n  return { commentId: data.name };\n}\n\nexport async function getAllComments(quoteId) {\n  const response = await fetch(`${FIREBASE_DOMAIN}/comments/${quoteId}.json`);\n\n  const data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not get comments.');\n  }\n\n  const transformedComments = [];\n\n  for (const key in data) {\n    const commentObj = {\n      id: key,\n      ...data[key],\n    };\n    if (commentObj.text.length > 0)\n      transformedComments.push(commentObj);\n  }\n\n  return transformedComments;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}